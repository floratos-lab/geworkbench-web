<html>
     <head>
        <meta charset="UTF-8">
        <script type="text/javascript" src="jquery-1.4.4.min.js"></script>
        <script type="text/javascript" src="d3.v3.min.js"></script>
        <script type="text/javascript" src="citrus_diagram.js"></script>
    </head> 
    <body>this is a page to test citrus diagram javascript code
        <div id='test_div'>
            </div>
        <script type="text/javascript">
    	/* create random test data */
    	var n = 30, m = 100;
    	var alteration = new Array(n);
    	for(var i=0; i<n; i++) {
    		var colorKeys = Object.keys($citrus_diagram.color_map);
    		var randomIndex = Math.floor( Math.random() * colorKeys.length );
            var geneSymbol = '';
            for(var j=0; j<4; j++) {
                var c = String.fromCharCode(65 + Math.floor(Math.random()*26) );
                geneSymbol += c;
            } 
    		alteration[i] = colorKeys[randomIndex]+"_"+geneSymbol;
    	}

        var samples = new Array(m);
        for(var j=0; j<m; j++) {
            samples[j] = '';
            for(var k=0; k<10; k++) {
                var c = String.fromCharCode(65 + Math.floor(Math.random()*26) );
                samples[j] += c;
            } 
        }

        var presence = new Array(n);
    	for(var i=0; i<n; i++) {
    		var p = new Array(m);
    		var r = Math.random();
    		for(var j=0; j<m; j++) {
    			var x = Math.random();
    			if(x>r)
    				p[j] = '1';
    			else
    				p[j] = '0';
    		}
    		presence[i] = p.join('');
    	}

    	var preppi = new Array(n);
        for(var i=0; i<n; i++) {
            preppi[i] = Math.floor(Math.random()*2);
        }

        var cindy = new Array(n);
        for(var i=0; i<n; i++) {
            cindy[i] = Math.floor(Math.random()*2);
        }
        
        var pvalue = new Array(n);
        for(var i=0; i<n; i++) {
            pvalue[i] = Math.random();
        }

        var nes = new Array(m);
        for(var i=0; i<m; i++) {
            nes[i] = Math.random()*2.-1.;
        }
        /* end of creating random test data */

        $citrus_diagram.create('test_div', alteration, samples, presence, preppi, cindy, pvalue, nes);
        </script>
    </body>
</html>
